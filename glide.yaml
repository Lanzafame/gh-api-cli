package: github.com/mh-cbon/gh-api-cli
scripts:
  prebump: git fetch --tags
  preversion: |
    philea "go vet %s" "go fmt %s" \
    && go run main.go -v \
    && rm-glob -r build/ \
    && rm-glob -r assets/ \
    && build-them-all build main.go -o "build/&os-&arch/&pkg" --ldflags "-X main.VERSION=!newversion!"
  postversion: |
    git push && git push --tags \
    && philea -S -p "build/windows*/*" "archive create -f -o=assets/%dname.zip -C=build/%dname/ ." \
    && philea -S -e windows*/** -p "build/*/**" "archive create -f -o=assets/%dname.tar.gz -C=build/%dname/ ." \
    && gh-api-cli create-release -n release -o mh-cbon -r gh-api-cli --ver !newversion! \
    && gh-api-cli upload-release-asset -n release --glob "assets/*" -o mh-cbon -r gh-api-cli --ver !newversion! \
    && rm-glob -r build/ \
    && rm-glob -r assets/ \
    && go install --ldflags "-X main.VERSION=!newversion!"
import:
- package: github.com/urfave/cli
  version: ^1.17.0
- package: github.com/google/go-github
- package: github.com/google/go-querystring
- package: golang.org/x/crypto
- package: github.com/mitchellh/go-homedir
- package: github.com/golang/oauth2
- package: github.com/mattn/go-zglob
